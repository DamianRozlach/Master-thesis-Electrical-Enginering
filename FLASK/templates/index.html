<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Praca Magisterska: Zdalne i autonomiczne sterowanie urządzenia mobilnego z zastosowaniem układu mikrokontrolera z koprocesorem czasu rzeczywistego." />
<title>Rozlach Damian praca Magisterska </title>
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
<script src="{{ url_for('static', filename='js/Joystick.js') }}"></script>

</head>
<!--
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
-->

<body>

<header>
<div id ="parentH" class="floatfix">
 <div id="div1">
   <div class="pad" > <h3 style="color: rgb(0, 0, 0);vertical-align: middle; margin-top: 10px;margin-bottom: 10px;" >Damian Rozlach praca Magisterska</h3></div>
   <div class="pad" style="vertical-align: middle;"> Zdalne i autonomiczne sterowanie obiektu mobilnego z zastosowaniem układu mikrokontrolera z koprocesorem czasu rzeczywistego </div>
 </div>
 <div id="div2">
  <img src="static/media/logo_agh.png" width="80" height="80">
 </div>
</div>
</header>

<div class="row floatfix">
  <div class="control marginDiv">
    <div id="divControlText" style="margin: 0px;"><h4 style="margin-left: 0px;margin-right: 0px;margin-top: 0px;margin-bottom: 8px;padding-bottom: 4px;padding-top: 4px;">Sterowanie</h4></div>
    <div id="divPanel" class="floatfix"> 
      <div id="joystick" class="joystick_zone"></div>
    </div>
  </div>
  <div class="main video marginDiv" id="newpost">
    <div id="divVidText" style="margin: 0px;"><h4 style="margin-left: 0px;margin-right: 0px;margin-top: 0px;margin-bottom: 8px;padding-bottom: 4px;padding-top: 4px;">Obraz z kamery</h4></div>
    <img  class="camera" src="{{ url_for('video_feed') }}">
    <!--<img  class="camera" style="width: 100%; height:100%; background-attachment: relative;" id="bg" class="center" src="{{ url_for('video_feed') }}">-->
    <!--<img  class="camera-bg" style="width: 100%; height:80%; background-attachment: fixed;" id="bg" class="center" src="https://www.psdbox.com/wp-content/uploads/2011/01/security-camera-photoshop-effect.jpg">-->
     
  </div>
</div>


<!-- <div class="navbar">

    <div class="ignoreCall">
          <a id=decline class="but_def">
              <button id="button"> 
                  <i style="background: red; color: white;" class="fa fa-times fa-2x" aria-hidden="true"></i>
              </button>
         </a>       
    </div>

</div> -->

<script type="text/javascript">
  var socket_status = io.connect('http://'+location.host+"/status");
  var socket_control = io.connect('http://'+location.host+"/control");

  $(document).ready(function(){
      /* connected display */
      setInterval(function(){
          if(socket_status.connected){
              $('#connex').html('<div class="led-box"><div class="led-blue"></div><div class="led-text">Connected</div></div>');
          }else{
              $('#connex').html('<div class="led-box"><div class="led-red"></div><div class="led-text">Not Connected</div></div>');
          }
      }, 1000);

      $('#output').text("starting");

      /******************************************
        BUTTONS
        *****************************************/
      $(document).on('touchstart touchmove', '#button1', function(evt){
          $('#output2').html("Button1");
          socket_control.emit('control', {data:{"A":1}});
          evt.preventDefault();
      });
      $(document).on('touchstart touchmove', '#button2', function(evt){
          socket_control.emit('control', {data:{"B":1}});
          $('#output2').html("Button2");
          evt.preventDefault();
      });

      /******************************************
        JOYSTICKS
        *****************************************/
      //socket_control.emit('control', {data:{"left":[(data.distance/options.size), data.angle.degree]}});
      var test = new Joystick("joystick", 0, socket_control, "left");
      var test2 = new Joystick("joystick2", 1, socket_control, "right");

      window.oncontextmenu = function(evt){
          evt.preventDefault();
          evt.stopPropagation();
          return false;
      }
  });
</script>


    
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<!--<script type="text/javascript">
  
var button = document.getElementById('button');

button.onclick = function() {
    var div = document.getElementById('newpost');
    if (div.style.display !== 'none') {
        div.style.display = 'none';
    }
    else {
        div.style.display = 'block';
    }
};
   
</script>-->

</body>
</html>

